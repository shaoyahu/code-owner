## 页面数据结构设计

总共包含以下 8 个部分

1. name
2. id
3. page
4. imports
5. nodes
6. effects
7. states
8. otherCode

### name

类型：string

页面的名称，一般为 xxx.tsx 表示为一个组件的名称。

### id

类型：string

页面的 id，通过 uuid V4 版本生成，全局唯一。

### page

类型：object

暂时只设计了页面的宽度与高度，由用户自己控制具体值，目前来看似乎作用不是很大。

### imports

类型：array

当前页面组件导入的所有依赖，每个元素都是一个完整写的依赖。

### nodes

类型：array

当前页面中的组件，当前页面作为一个根组件，下面的子组件都在 nodes 里面。

具体内部结构设计见下方第二部分。

### effects

类型：array

当前页面组件代码中存在的 useEffect hook，由 react 提供，应该在编辑器中设计单独的配置部分。

### states

类型：array

当前页面组件代码中存在的 useState hook，由 react 提供，应该在编辑器中设计单独的配置部分。

### otherCode

类型：string

组件中的其他代码，会整体放在组件中的 useState 之后，useEffect 之前。

### 页面结构 schema 示例

```json
{
  "name": "页面名称（Button.tsx）",
  "id": "123123",
  "page": {
    "height": "800px",
    "width": "1100px"
  },
  "imports": ["import { useNavigate } from 'react-router-dom'"],
  "nodes": [
    {
      "id": "182754",
      "type": "div",
      "name": "一个控件",
      "_desc": "最基础的组件，用来填充空间或包裹组件",
      "css": {
        "width": "300px",
        "height": "300px"
      },
      "tailwind": "w-[300px] h-[300px]",
      "event": {
        "onClick": {
          "name": "onClick",
          "handleCode": "console.log('click')"
        }
      },
      "childNode": [
        {
          "id": "123123134",
          "type": "ad-button",
          "name": "antd的按钮",
          "_desc": "这里用户选了一个 antd 的按钮组件为例",
          "css": {
            "margin": "10px !important"
          },
          "tailwind": "m-[10px]!",
          "attr": {
            "type": "primary"
          },
          "event": {
            "onClick": {
              "name": "onClick",
              "handleCode": "console.log('click')"
            }
          }
        }
      ]
    }
  ],
  "effects": [
    {
      "runCode": "",
      "dependence": []
    }
  ],
  "states": [
    {
      "name": "count",
      "_desc": "name 是由用户决定的，用户一旦决定了 name 那么 setState 函数名就会是固定的",
      "value": 0
    }
  ],
  "otherCode": "const navigate = useNavigate()"
}

```


## nodes 结构设计

包含以下 9 个部分：

1. id
2. type
3. name
4. _desc
5. css
6. tailwind
7. event
8. childNode
9. attr

### id

类型：string

组件的 id，通过 uuid V4 版本生成，全局唯一。

### type

类型：string

组件的组件类型，每个组件有固定的组件类型，页面通过组件类型来确定具体渲染的组件。

### name

类型：string

组件名称，用来便于识别正在操作的是哪个组件，不会出现在页面代码中。

### _desc

类型：string

内部属性，页面中不展示，用于给特定组件做标记。

### css

类型：object

原生 css，一个对象，通过 css={css} 注入到组件中渲染样式。

### tailwind

类型：string

本项目使用 tailwind，并且可以输出支持 tailwind 的项目，需要用到的 tailwind 类名直接写在这里。

### event

类型：object

组件的事件，所有组件都有一个 onClick 事件，不同的组件有自己的其他事件，通过 onClick={()=>{event.onClick.handleCode}} 注入到组件代码中。

### childNode

类型：array

组件里面的子组件，组件之间可以嵌套，嵌套的组件拥有相同的所有数据结构。

### attr

类型：object

组件的 attribute 属性，用于三方库组件的属性使用，通过 {...attr} 的方式注入到组件代码中。

### node 结构 schema 示例

```json
[
    {
      id: "1",
      type: "div",
      name: "顶部 header",
      _desc: "最基础的组件，用来填充空间或包裹组件",
      css: {
        fontSize: "12px",
      },
      tailwind: "h-[300px]",
      event: {
        onClick: {
          name: "onClick",
          handleCode: "console.log('click')",
        },
      },
      childNode: [
        {
          id: "2",
          type: "span",
          name: "页面名称",
          _desc: "最基础的组件，用于放置文字，因为组件内是可以直接放文字的",
          text: "直接的文字",
          tailwind: "!m-2",
          css: {},
        },
        {
          id: "98",
          type: "div",
          name: "子元素div",
          text: "no",
          tailwind: "bg-gray-200 h-10 flex items-center justify-around",
          childNode: [
            {
              id: "98-1",
              type: "ad-button",
              name: "按钮1",
              text: "按钮1",
              css: {},
              tailwind: "text-[12px]",
              event: {},
              attr: {
                block: true,
                type: "default",
              },
            },
            {
              id: "98-2",
              type: "ad-button",
              name: "按钮2",
              text: "按钮2",
              css: {},
              tailwind: "text-[12px]",
              event: {},
              attr: {
                block: false,
              },
            },
            {
              id: "98-3",
              type: "ad-button",
              name: "按钮3",
              text: "按钮3",
              css: {},
              tailwind: "text-[12px]",
              event: {},
            },
          ],
        },
        {
          id: "3",
          type: "ad-button",
          name: "登录按钮",
          css: {},
          tailwind: "text-[20px] font-bold",
          event: {},
          childNode: [
            {
              id: "4",
              type: "span",
              name: "登录按钮文本",
              text: "组件内的文字",
            },
          ],
        },
      ],
    },
    {
      id: "11",
      type: "div",
      name: "底部 footer",
      _desc: "最基础的组件，用来填充空间或包裹组件",
      css: {},
      tailwind: "w-[300px] h-[300px]",
      event: {
        onClick: {
          name: "onClick",
          handleCode: "console.log('click')",
        },
      },
      childNode: [
        {
          id: "12",
          type: "span",
          name: "页面名称",
          _desc: "最基础的组件，用于放置文字，因为组件内是可以直接放文字的",
          text: "直接的文字",
        },
        {
          id: "13",
          type: "ad-button",
          name: "订单",
          css: {},
          tailwind: "text-[20px] font-bold",
          event: {},
          childNode: [
            {
              id: "14",
              type: "span",
              name: "登录按钮文本",
              text: "组件内的文字",
            },
          ],
        },
        {
          id: "23",
          type: "ad-button",
          name: "购物车",
          css: {},
          tailwind: "text-[20px] font-bold",
          event: {},
        },
        {
          id: "33",
          type: "ad-button",
          name: "我的",
          css: {},
          tailwind: "text-[20px] font-bold",
          event: {},
          childNode: [
            {
              id: "34",
              type: "span",
              name: "登录按钮文本",
              text: "组件内的文字",
            },
          ],
        },
      ],
    },
  ]
```
